(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[678],{1705:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>f});var a=r(5155),t=r(2115),n=r(5695),o=r(6874),i=r.n(o),m=r(5424),c=r(3568),l=r(5196),d=r(4416),u=r(8749),h=r(2657),x=r(5339),p=r(2318);function f(){let e=(0,n.useRouter)(),[s,r]=(0,t.useState)({username:"",email:"",password:"",confirmPassword:""}),[o,f]=(0,t.useState)(!1),[g,y]=(0,t.useState)(!1),[w,A]=(0,t.useState)({username:!1,email:!1,password:!1,confirmPassword:!1}),j={username:{minLength:s.username.length>=3,maxLength:s.username.length<=20,format:/^[a-zA-Z0-9_]+$/.test(s.username)},email:{format:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)},password:{minLength:s.password.length>=8,hasNumber:/\d/.test(s.password),hasLetter:/[a-zA-Z]/.test(s.password)},confirmPassword:{matches:s.password===s.confirmPassword&&s.confirmPassword.length>0}},N=j.username.minLength&&j.username.maxLength&&j.username.format&&j.email.format&&j.password.minLength&&j.password.hasNumber&&j.password.hasLetter&&j.confirmPassword.matches,b=e=>{r({...s,[e.target.name]:e.target.value})},v=e=>{A({...w,[e]:!0})},k=async r=>{if(r.preventDefault(),A({username:!0,email:!0,password:!0,confirmPassword:!0}),!N)return void c.Ay.error("Por favor, corrija os erros no formul\xe1rio");y(!0);try{await m.y.register(s.username,s.email,s.password),c.Ay.success("Cadastro realizado com sucesso!"),e.push("/dashboard")}catch(r){var a,t,n,o;let e=(null==(t=r.response)||null==(a=t.data)?void 0:a.message)||"Erro ao criar conta",s=null==(o=r.response)||null==(n=o.data)?void 0:n.errors;s&&Array.isArray(s)?s.forEach(e=>{c.Ay.error(e.message||e)}):c.Ay.error(e)}finally{y(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.l$,{position:"top-right"}),(0,a.jsxs)("div",{className:"card bg-gray-800 border-gray-700",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Criar Conta"}),(0,a.jsx)("p",{className:"text-gray-400 mt-2",children:"Preencha os dados abaixo para se registrar"})]}),(0,a.jsxs)("form",{className:"space-y-6",onSubmit:k,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300",children:"Nome de usu\xe1rio"}),(0,a.jsx)("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,className:"input-field mt-1 bg-gray-700 border-gray-600 text-white placeholder-gray-400 ".concat(w.username&&!j.username.format?"border-red-500":""," ").concat(w.username&&j.username.format&&j.username.minLength&&j.username.maxLength?"border-green-500":""),placeholder:"johndoe",value:s.username,onChange:b,onBlur:()=>v("username")}),w.username&&(0,a.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center text-xs ".concat(j.username.minLength?"text-green-400":"text-red-400"),children:[j.username.minLength?(0,a.jsx)(l.A,{size:12,className:"mr-1"}):(0,a.jsx)(d.A,{size:12,className:"mr-1"}),"M\xednimo 3 caracteres"]}),(0,a.jsxs)("div",{className:"flex items-center text-xs ".concat(j.username.maxLength?"text-green-400":"text-red-400"),children:[j.username.maxLength?(0,a.jsx)(l.A,{size:12,className:"mr-1"}):(0,a.jsx)(d.A,{size:12,className:"mr-1"}),"M\xe1ximo 20 caracteres"]}),(0,a.jsxs)("div",{className:"flex items-center text-xs ".concat(j.username.format?"text-green-400":"text-red-400"),children:[j.username.format?(0,a.jsx)(l.A,{size:12,className:"mr-1"}):(0,a.jsx)(d.A,{size:12,className:"mr-1"}),"Apenas letras, n\xfameros e underscore"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email"}),(0,a.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"input-field mt-1 bg-gray-700 border-gray-600 text-white placeholder-gray-400 ".concat(w.email&&!j.email.format?"border-red-500":""," ").concat(w.email&&j.email.format?"border-green-500":""),placeholder:"seu@email.com",value:s.email,onChange:b,onBlur:()=>v("email")}),w.email&&!j.email.format&&(0,a.jsxs)("div",{className:"mt-2 flex items-center text-xs text-red-400",children:[(0,a.jsx)(d.A,{size:12,className:"mr-1"}),"Email inv\xe1lido"]}),w.email&&j.email.format&&(0,a.jsxs)("div",{className:"mt-2 flex items-center text-xs text-green-400",children:[(0,a.jsx)(l.A,{size:12,className:"mr-1"}),"Email v\xe1lido"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Senha"}),(0,a.jsxs)("div",{className:"relative mt-1",children:[(0,a.jsx)("input",{id:"password",name:"password",type:o?"text":"password",autoComplete:"new-password",required:!0,className:"input-field pr-10 bg-gray-700 border-gray-600 text-white placeholder-gray-400 ".concat(w.password&&(!j.password.minLength||!j.password.hasNumber||!j.password.hasLetter)?"border-red-500":""," ").concat(w.password&&j.password.minLength&&j.password.hasNumber&&j.password.hasLetter?"border-green-500":""),placeholder:"••••••••",value:s.password,onChange:b,onBlur:()=>v("password")}),(0,a.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>f(!o),children:o?(0,a.jsx)(u.A,{className:"h-5 w-5 text-gray-400"}):(0,a.jsx)(h.A,{className:"h-5 w-5 text-gray-400"})})]}),w.password&&(0,a.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center text-xs ".concat(j.password.minLength?"text-green-400":"text-red-400"),children:[j.password.minLength?(0,a.jsx)(l.A,{size:12,className:"mr-1"}):(0,a.jsx)(d.A,{size:12,className:"mr-1"}),"M\xednimo 8 caracteres"]}),(0,a.jsxs)("div",{className:"flex items-center text-xs ".concat(j.password.hasNumber?"text-green-400":"text-red-400"),children:[j.password.hasNumber?(0,a.jsx)(l.A,{size:12,className:"mr-1"}):(0,a.jsx)(d.A,{size:12,className:"mr-1"}),"Pelo menos um n\xfamero"]}),(0,a.jsxs)("div",{className:"flex items-center text-xs ".concat(j.password.hasLetter?"text-green-400":"text-red-400"),children:[j.password.hasLetter?(0,a.jsx)(l.A,{size:12,className:"mr-1"}):(0,a.jsx)(d.A,{size:12,className:"mr-1"}),"Pelo menos uma letra"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300",children:"Confirmar senha"}),(0,a.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:o?"text":"password",autoComplete:"new-password",required:!0,className:"input-field mt-1 bg-gray-700 border-gray-600 text-white placeholder-gray-400 ".concat(w.confirmPassword&&!j.confirmPassword.matches?"border-red-500":""," ").concat(w.confirmPassword&&j.confirmPassword.matches?"border-green-500":""),placeholder:"••••••••",value:s.confirmPassword,onChange:b,onBlur:()=>v("confirmPassword")}),w.confirmPassword&&!j.confirmPassword.matches&&s.confirmPassword.length>0&&(0,a.jsxs)("div",{className:"mt-2 flex items-center text-xs text-red-400",children:[(0,a.jsx)(d.A,{size:12,className:"mr-1"}),"As senhas n\xe3o coincidem"]}),w.confirmPassword&&j.confirmPassword.matches&&(0,a.jsxs)("div",{className:"mt-2 flex items-center text-xs text-green-400",children:[(0,a.jsx)(l.A,{size:12,className:"mr-1"}),"Senhas coincidem"]})]}),!N&&(w.username||w.email||w.password||w.confirmPassword)&&(0,a.jsxs)("div",{className:"bg-red-900/20 border border-red-500 rounded-lg p-3 flex items-start",children:[(0,a.jsx)(x.A,{className:"text-red-400 mr-2 flex-shrink-0 mt-0.5",size:16}),(0,a.jsx)("div",{className:"text-sm text-red-400",children:"Por favor, corrija os erros acima antes de continuar"})]}),(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsx)(i(),{href:"/login",className:"font-medium text-blue-400 hover:text-blue-300",children:"J\xe1 tem uma conta? Fa\xe7a login"})})}),(0,a.jsx)("button",{type:"submit",disabled:g||!N,className:"btn-primary w-full flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed",children:g?(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.A,{className:"w-5 h-5"}),"Criar conta"]})})]})]})]})}},2318:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(9946).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},2657:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(9946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},4416:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4750:(e,s,r)=>{"use strict";r.d(s,{A:()=>i,F:()=>o});var a=r(3464),t=r(7383);let n="https://api.atlasdao.info/api/v1",o=a.A.create({baseURL:n,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{let s=t.A.get("access_token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{var s;let r=e.config;if((null==(s=e.response)?void 0:s.status)===401&&!r._retry){r._retry=!0;try{let e=t.A.get("refresh_token");if(e){let{accessToken:s}=(await a.A.post("".concat(n,"/auth/refresh"),{refreshToken:e})).data;return t.A.set("access_token",s),t.A.set("refresh_token",e),r.headers.Authorization="Bearer ".concat(s),o(r)}}catch(e){t.A.remove("access_token"),t.A.remove("refresh_token"),window.location.href="/login"}}return Promise.reject(e)});let i=o},5196:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(9946).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},5339:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(9946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5424:(e,s,r)=>{"use strict";r.d(s,{y:()=>n});var a=r(4750),t=r(7383);let n={async login(e,s){let{accessToken:r,user:n}=(await a.A.post("/auth/login",{emailOrUsername:e,password:s})).data;return t.A.set("access_token",r),t.A.set("refresh_token",""),t.A.set("user",JSON.stringify(n)),{access_token:r,refresh_token:"",user:n}},async register(e,s,r){let{accessToken:n,user:o}=(await a.A.post("/auth/register",{username:e,email:s,password:r})).data;return t.A.set("access_token",n),t.A.set("refresh_token",""),t.A.set("user",JSON.stringify(o)),{access_token:n,refresh_token:"",user:o}},async logout(){try{await a.A.post("/auth/logout")}catch(e){console.error("Logout error:",e)}finally{t.A.remove("access_token"),t.A.remove("refresh_token"),t.A.remove("user"),window.location.href="/login"}},async getCurrentUser(){let e=t.A.get("user");if(e)try{return JSON.parse(e)}catch(e){}return null},isAuthenticated:()=>!!t.A.get("access_token"),isAdmin(){let e=t.A.get("user");if(e)try{var s;let r=JSON.parse(e);return(null==(s=r.roles)?void 0:s.includes("ADMIN"))||"ADMIN"===r.role}catch(e){}return!1}}},5695:(e,s,r)=>{"use strict";var a=r(8999);r.o(a,"useParams")&&r.d(s,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(s,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(s,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(s,{useSearchParams:function(){return a.useSearchParams}})},8749:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(9946).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},9582:(e,s,r)=>{Promise.resolve().then(r.bind(r,1705))}},e=>{e.O(0,[595,568,874,441,964,358],()=>e(e.s=9582)),_N_E=e.O()}]);