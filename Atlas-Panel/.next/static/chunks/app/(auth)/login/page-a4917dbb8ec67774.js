(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72],{2657:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},4039:(e,t,r)=>{Promise.resolve().then(r.bind(r,4099))},4099:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(5155),a=r(2115),l=r(5695),n=r(6874),o=r.n(n),i=r(5424),c=r(3568),u=r(8749),d=r(2657),m=r(5339);let h=(0,r(9946).A)("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]);function x(){let e=(0,l.useRouter)(),[t,r]=(0,a.useState)(""),[n,x]=(0,a.useState)(""),[y,p]=(0,a.useState)(!1),[g,f]=(0,a.useState)(!1),[b,A]=(0,a.useState)([]),v=async r=>{r.preventDefault(),f(!0),A([]);try{await i.y.login(t,n),c.Ay.success("Login realizado com sucesso!"),e.push("/dashboard")}catch(r){var s,a,l,o;let e=(null==(a=r.response)||null==(s=a.data)?void 0:s.message)||"Erro ao fazer login",t=null==(o=r.response)||null==(l=o.data)?void 0:l.errors;t&&Array.isArray(t)?(A(t.map(e=>e.message||e)),t.forEach(e=>{c.Ay.error(e.message||e)})):(A([e]),c.Ay.error(e))}finally{f(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.l$,{position:"top-right"}),(0,s.jsxs)("div",{className:"card bg-gray-800 border-gray-700",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Entrar"}),(0,s.jsx)("p",{className:"text-gray-400 mt-2",children:"Acesse sua conta para continuar"})]}),(0,s.jsxs)("form",{className:"space-y-6",onSubmit:v,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email ou Nome de Usu\xe1rio"}),(0,s.jsx)("input",{id:"email",name:"email",type:"text",autoComplete:"username email",required:!0,className:"input-field mt-1 bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:border-blue-500 focus:ring-blue-500",placeholder:"seu@email.com ou username",value:t,onChange:e=>r(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Senha"}),(0,s.jsxs)("div",{className:"relative mt-1",children:[(0,s.jsx)("input",{id:"password",name:"password",type:y?"text":"password",autoComplete:"current-password",required:!0,className:"input-field pr-10 bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:border-blue-500 focus:ring-blue-500",placeholder:"••••••••",value:n,onChange:e=>x(e.target.value)}),(0,s.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>p(!y),children:y?(0,s.jsx)(u.A,{className:"h-5 w-5 text-gray-400 hover:text-gray-300"}):(0,s.jsx)(d.A,{className:"h-5 w-5 text-gray-400 hover:text-gray-300"})})]})]}),b.length>0&&(0,s.jsx)("div",{className:"bg-red-900/20 border border-red-500 rounded-lg p-3",children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)(m.A,{className:"text-red-400 mr-2 flex-shrink-0 mt-0.5",size:16}),(0,s.jsx)("div",{className:"text-sm text-red-400",children:1===b.length?b[0]:(0,s.jsx)("ul",{className:"list-disc list-inside space-y-1",children:b.map((e,t)=>(0,s.jsx)("li",{children:e},t))})})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-600 bg-gray-700 rounded"}),(0,s.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-400",children:"Lembrar de mim"})]}),(0,s.jsx)("div",{className:"text-sm",children:(0,s.jsx)(o(),{href:"/forgot-password",className:"font-medium text-blue-400 hover:text-blue-300",children:"Esqueceu a senha?"})})]}),(0,s.jsx)("button",{type:"submit",disabled:g,className:"btn-primary w-full flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-medium py-2 px-4 rounded-md transition-colors",children:g?(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h,{className:"w-5 h-5"}),"Entrar"]})}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("span",{className:"text-sm text-gray-400",children:["N\xe3o tem uma conta?"," ",(0,s.jsx)(o(),{href:"/register",className:"font-medium text-blue-400 hover:text-blue-300",children:"Cadastre-se"})]})})]})]})]})}},4750:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,F:()=>n});var s=r(3464),a=r(7383);let l="https://api.atlasdao.info/api/v1",n=s.A.create({baseURL:l,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=a.A.get("access_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,async e=>{var t;let r=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!r._retry){r._retry=!0;try{let e=a.A.get("refresh_token");if(e){let{accessToken:t}=(await s.A.post("".concat(l,"/auth/refresh"),{refreshToken:e})).data;return a.A.set("access_token",t),a.A.set("refresh_token",e),r.headers.Authorization="Bearer ".concat(t),n(r)}}catch(e){a.A.remove("access_token"),a.A.remove("refresh_token"),window.location.href="/login"}}return Promise.reject(e)});let o=n},5339:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5424:(e,t,r)=>{"use strict";r.d(t,{y:()=>l});var s=r(4750),a=r(7383);let l={async login(e,t){let{accessToken:r,user:l}=(await s.A.post("/auth/login",{emailOrUsername:e,password:t})).data;return a.A.set("access_token",r),a.A.set("refresh_token",""),a.A.set("user",JSON.stringify(l)),{access_token:r,refresh_token:"",user:l}},async register(e,t,r){let{accessToken:l,user:n}=(await s.A.post("/auth/register",{username:e,email:t,password:r})).data;return a.A.set("access_token",l),a.A.set("refresh_token",""),a.A.set("user",JSON.stringify(n)),{access_token:l,refresh_token:"",user:n}},async logout(){try{await s.A.post("/auth/logout")}catch(e){console.error("Logout error:",e)}finally{a.A.remove("access_token"),a.A.remove("refresh_token"),a.A.remove("user"),window.location.href="/login"}},async getCurrentUser(){let e=a.A.get("user");if(e)try{return JSON.parse(e)}catch(e){}return null},isAuthenticated:()=>!!a.A.get("access_token"),isAdmin(){let e=a.A.get("user");if(e)try{var t;let r=JSON.parse(e);return(null==(t=r.roles)?void 0:t.includes("ADMIN"))||"ADMIN"===r.role}catch(e){}return!1}}},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},8749:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])}},e=>{e.O(0,[595,568,874,441,964,358],()=>e(e.s=4039)),_N_E=e.O()}]);