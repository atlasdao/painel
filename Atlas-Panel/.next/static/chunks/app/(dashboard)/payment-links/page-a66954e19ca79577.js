(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[699],{3062:(e,a,t)=>{"use strict";t.d(a,{Dv:()=>o,Gj:()=>i,ZJ:()=>n,gY:()=>l,lE:()=>r});var s=t(4750);let i={getValidationStatus:async()=>(await s.A.get("/account-validation/status")).data,createValidationPayment:async e=>(await s.A.post("/account-validation/create-payment",{depixAddress:e})).data,getValidationRequirements:async()=>(await s.A.get("/account-validation/requirements")).data,getUserLimits:async()=>(await s.A.get("/account-validation/limits")).data},r={createDeposit:async(e,a)=>(await s.A.post("/pix/deposit",{amount:e,pixKey:a})).data,generateQRCode:async e=>(await s.A.post("/pix/qrcode",e)).data,createWithdraw:async(e,a)=>(await s.A.post("/pix/withdraw",{amount:e,pixKey:a})).data,async getTransactions(e){let a=e?{take:e.limit,skip:e.offset}:void 0;return(await s.A.get("/pix/transactions",{params:a})).data},getTransaction:async e=>(await s.A.get("/pix/transactions/".concat(e))).data,getBalance:async()=>(await s.A.get("/pix/balance")).data,checkDepositStatus:async e=>(await s.A.get("/pix/deposit/".concat(e,"/status"))).data},n={getDashboardStats:async()=>(await s.A.get("/admin/dashboard")).data,async getAllTransactions(e){let a=e?{take:e.limit,skip:e.offset,status:e.status,userId:e.userId?"string"==typeof e.userId?e.userId:e.userId.toString():void 0,type:e.type}:void 0;return(await s.A.get("/admin/transactions",{params:a})).data},updateTransactionStatus:async(e,a)=>(await s.A.patch("/admin/transactions/".concat(e),{status:a})).data,async getUsers(e){let a=e?{take:e.limit,skip:e.offset}:void 0;return(await s.A.get("/admin/users",{params:a})).data},createUser:async e=>(await s.A.post("/admin/users",e)).data,updateUser:async(e,a)=>(await s.A.patch("/admin/users/".concat(e),a)).data,async deleteUser(e){await s.A.delete("/admin/users/".concat(e))},generateApiKey:async e=>(await s.A.post("/admin/users/".concat(e,"/generate-api-key"))).data,updateUserMedLimits:async(e,a)=>(await s.A.put("/admin/users/".concat(e,"/med-limits"),a)).data,adjustUserReputation:async(e,a)=>(await s.A.put("/account-validation/user/".concat(e,"/limits"),a)).data,getSystemStats:async()=>(await s.A.get("/admin/stats")).data,getUserStats:async e=>e?(await s.A.get("/admin/users/".concat(e,"/stats"))).data:(await s.A.get("/admin/stats/users")).data,async getAuditStats(e,a){let t={startDate:null==e?void 0:e.toISOString(),endDate:null==a?void 0:a.toISOString()};return(await s.A.get("/admin/stats/audit",{params:t})).data},async getAuditLogs(e){var a,t;let i=e?{skip:e.skip,take:e.take,userId:e.userId,action:e.action,resource:e.resource,startDate:null==(a=e.startDate)?void 0:a.toISOString(),endDate:null==(t=e.endDate)?void 0:t.toISOString()}:void 0;return(await s.A.get("/admin/audit-logs",{params:i})).data},async getAllUsersWithLimits(e){let a=e?{skip:e.skip,take:e.take,isFirstDay:e.isFirstDay,isKycVerified:e.isKycVerified,isHighRiskUser:e.isHighRiskUser}:void 0;return(await s.A.get("/admin/users/limits",{params:a})).data},getUserLimits:async e=>(await s.A.get("/admin/users/".concat(e,"/limits"))).data,updateUserLimits:async(e,a)=>(await s.A.put("/admin/users/".concat(e,"/limits"),a)).data,resetUserFirstDay:async e=>(await s.A.post("/admin/users/".concat(e,"/limits/reset-first-day"))).data,applyKycLimits:async e=>(await s.A.post("/admin/users/".concat(e,"/limits/apply-kyc-limits"))).data},o={getUserLimits:async()=>(await s.A.get("/pix/limits")).data},l={getMyRequests:async()=>(await s.A.get("/api-key-requests/my-requests")).data,getMyApiKeys:async()=>(await s.A.get("/api-key-requests/my-api-keys")).data,createRequest:async e=>(await s.A.post("/api-key-requests",e)).data,getPendingRequests:async()=>(await s.A.get("/api-key-requests")).data,approveRequest:async(e,a)=>(await s.A.put("/api-key-requests/".concat(e,"/approve"),a||{})).data,rejectRequest:async(e,a)=>(await s.A.put("/api-key-requests/".concat(e,"/reject"),a)).data}},4750:(e,a,t)=>{"use strict";t.d(a,{A:()=>o,F:()=>n});var s=t(3464),i=t(7383);let r="https://api.atlasdao.info/api/v1",n=s.A.create({baseURL:r,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let a=i.A.get("access_token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,async e=>{var a;let t=e.config;if((null==(a=e.response)?void 0:a.status)===401&&!t._retry){t._retry=!0;try{let e=i.A.get("refresh_token");if(e){let{accessToken:a}=(await s.A.post("".concat(r,"/auth/refresh"),{refreshToken:e})).data;return i.A.set("access_token",a),i.A.set("refresh_token",e),t.headers.Authorization="Bearer ".concat(a),n(t)}}catch(e){i.A.remove("access_token"),i.A.remove("refresh_token"),window.location.href="/login"}}return Promise.reject(e)});let o=n},6472:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>w});var s=t(5155),i=t(2115),r=t(4750),n=t(3062),o=t(6671),l=t(4616),c=t(5525),d=t(4631),m=t(7939),u=t(646),p=t(8164),g=t(4357),x=t(3786),h=t(1788),y=t(2525),b=t(4186),v=t(6862);function w(){let[e,a]=(0,i.useState)([]),[t,w]=(0,i.useState)(!1),[j,f]=(0,i.useState)({}),[A,N]=(0,i.useState)({amount:"",walletAddress:"",description:""}),[k,C]=(0,i.useState)(!1),[R,S]=(0,i.useState)(null),[q,L]=(0,i.useState)(!0);(0,i.useEffect)(()=>{D(),z()},[]);let D=async()=>{L(!0);try{let e=await n.Gj.getValidationStatus();S(e)}catch(i){var e,a,t,s;console.error("Error checking validation status:",i),(null==(e=i.response)?void 0:e.status)===401?(o.oR.error("Usu\xe1rio n\xe3o autenticado. Fa\xe7a login novamente."),window.location.href="/login"):(null==(a=i.response)?void 0:a.status)===404?o.oR.error("Servi\xe7o de valida\xe7\xe3o n\xe3o encontrado"):(null==(s=i.response)||null==(t=s.data)?void 0:t.message)?o.oR.error("Erro: ".concat(i.response.data.message)):o.oR.error("Erro ao verificar status de valida\xe7\xe3o")}finally{L(!1)}},z=async()=>{try{let e=await r.F.get("/payment-links");a(e.data),e.data.forEach(e=>{U(e.shortCode)})}catch(e){console.error("Error fetching payment links:",e)}},U=async e=>{try{let a="".concat(window.location.origin,"/pay/").concat(e),t=await v.toDataURL(a,{width:256,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});f(a=>({...a,[e]:t}))}catch(e){console.error("Error generating QR code:",e)}},F=async e=>{e.preventDefault(),C(!0);try{await r.F.post("/payment-links",{...A,amount:parseFloat(A.amount)}),o.oR.success("Link de pagamento criado com sucesso!"),w(!1),N({amount:"",walletAddress:"",description:""}),z()}catch(e){var a,t;o.oR.error((null==(t=e.response)||null==(a=t.data)?void 0:a.message)||"Erro ao criar link de pagamento")}finally{C(!1)}},E=async e=>{if(confirm("Tem certeza que deseja excluir este link?"))try{await r.F.delete("/payment-links/".concat(e)),o.oR.success("Link exclu\xeddo com sucesso!"),z()}catch(e){var a,t;o.oR.error((null==(t=e.response)||null==(a=t.data)?void 0:a.message)||"Erro ao excluir link")}},V=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)(o.l$,{position:"top-right"}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Links de Pagamento"}),(null==R?void 0:R.isValidated)?(0,s.jsxs)("button",{onClick:()=>w(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[(0,s.jsx)(l.A,{size:20}),"Novo Link"]}):(0,s.jsxs)("button",{disabled:!0,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-gray-400 rounded-lg cursor-not-allowed",children:[(0,s.jsx)(c.A,{size:20}),"Valida\xe7\xe3o Necess\xe1ria"]})]}),q?(0,s.jsx)("div",{className:"mb-6 p-4 bg-gray-800/50 border border-gray-600/30 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(d.A,{className:"text-gray-400 animate-spin",size:20}),(0,s.jsx)("p",{className:"text-gray-400",children:"Verificando status de valida\xe7\xe3o..."})]})}):(null==R?void 0:R.isValidated)?(0,s.jsx)("div",{className:"mb-6 p-4 bg-blue-900/20 border border-blue-500/30 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(m.A,{className:"text-blue-400 mt-0.5",size:20}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("p",{className:"text-blue-400 font-medium",children:"Links de Pagamento R\xe1pido"}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-green-400",children:[(0,s.jsx)(u.A,{size:16}),(0,s.jsx)("span",{className:"text-sm",children:"Conta Validada"})]})]}),(0,s.jsx)("p",{className:"text-gray-300 text-sm",children:"Crie links personalizados para receber pagamentos. Cada link gera um QR Code PIX que \xe9 renovado automaticamente a cada 28 minutos ou ap\xf3s cada pagamento."}),(null==R?void 0:R.limits)&&(0,s.jsxs)("div",{className:"mt-3 p-3 bg-blue-900/30 border border-blue-600/30 rounded",children:[(0,s.jsx)("p",{className:"text-blue-300 text-sm font-medium mb-1",children:"Seus Limites Atuais:"}),(0,s.jsxs)("p",{className:"text-blue-300 text-sm",children:["Limite di\xe1rio: ",(0,s.jsxs)("strong",{children:["R$ ",R.limits.currentDailyLimit]}),"(Tier ",R.limits.limitTier,")"]}),R.reputation&&(0,s.jsxs)("p",{className:"text-blue-300 text-sm",children:["Reputa\xe7\xe3o: ",(0,s.jsx)("strong",{children:R.reputation.reputationScore.toFixed(1)}),"(",R.reputation.totalApprovedCount," pagamentos aprovados)"]})]})]})]})}):(0,s.jsx)("div",{className:"mb-6 p-6 bg-yellow-900/10 border border-yellow-500/30 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"p-2 bg-yellow-500/20 rounded-lg",children:(0,s.jsx)(c.A,{className:"text-yellow-400 flex-shrink-0",size:24})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-yellow-400 font-semibold text-lg mb-2",children:"Valida\xe7\xe3o de Conta Necess\xe1ria"}),(0,s.jsxs)("p",{className:"text-gray-300 mb-5 leading-relaxed",children:["Para criar links de pagamento, voc\xea precisa validar sua conta primeiro. O processo \xe9 simples e requer apenas um pagamento de ",(0,s.jsx)("strong",{className:"text-white",children:"R$ 1,00"}),"."]}),(0,s.jsxs)("a",{href:"/deposit",className:"inline-flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-yellow-600 to-yellow-500 hover:from-yellow-700 hover:to-yellow-600 text-white rounded-lg transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:[(0,s.jsx)(c.A,{size:18}),"Validar Conta Agora"]})]})]})}),t&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Criar Link de Pagamento"}),(0,s.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Valor (R$)"}),(0,s.jsx)("input",{type:"number",step:"0.01",min:"0.01",value:A.amount,onChange:e=>N({...A,amount:e.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 text-white rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,placeholder:"100.00"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Carteira de Destino"}),(0,s.jsx)("input",{type:"text",value:A.walletAddress,onChange:e=>N({...A,walletAddress:e.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 text-white rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,placeholder:"Endere\xe7o da carteira"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Descri\xe7\xe3o (Opcional)"}),(0,s.jsx)("input",{type:"text",value:A.description,onChange:e=>N({...A,description:e.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 text-white rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Pagamento do produto X"})]}),(0,s.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,s.jsx)("button",{type:"button",onClick:()=>w(!1),className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",disabled:k,children:"Cancelar"}),(0,s.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50",disabled:k,children:k?"Criando...":"Criar Link"})]})]})]})}),(null==R?void 0:R.isValidated)?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:0===e.length?(0,s.jsxs)("div",{className:"col-span-full bg-gray-800 border border-gray-700 rounded-lg p-12 text-center",children:[(0,s.jsx)(p.A,{className:"mx-auto h-12 w-12 text-gray-500 mb-4"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Nenhum link de pagamento criado"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:'Clique em "Novo Link" para criar seu primeiro link de pagamento'})]}):e.map(e=>(0,s.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-6",children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:j[e.shortCode]&&(0,s.jsx)("img",{src:j[e.shortCode],alt:"QR Code",className:"w-32 h-32 bg-white p-2 rounded-lg"})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Valor"}),(0,s.jsx)("p",{className:"text-xl font-bold text-white",children:V(e.amount)})]}),e.description&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Descri\xe7\xe3o"}),(0,s.jsx)("p",{className:"text-white",children:e.description})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Link"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsxs)("code",{className:"text-xs text-blue-400 bg-gray-700 px-2 py-1 rounded flex-1 truncate",children:[window.location.origin,"/pay/",e.shortCode]}),(0,s.jsx)("button",{onClick:()=>{var a;return a="".concat(window.location.origin,"/pay/").concat(e.shortCode),void(navigator.clipboard.writeText(a),o.oR.success("Link copiado!"))},className:"text-gray-400 hover:text-white",title:"Copiar link",children:(0,s.jsx)(g.A,{size:16})}),(0,s.jsx)("a",{href:"".concat(window.location.origin,"/pay/").concat(e.shortCode),target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white",title:"Abrir link",children:(0,s.jsx)(x.A,{size:16})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-3 border-t border-gray-700",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"Pagamentos"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-white",children:e.totalPayments||0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"Total Recebido"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-white",children:V(e.totalAmount||0)})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-3",children:[(0,s.jsxs)("button",{onClick:()=>((e,a)=>{let t=j[e];if(!t)return;let s=document.createElement("a");s.download="qrcode-".concat(e,"-").concat(a||"pagamento",".png"),s.href=t,s.click()})(e.shortCode,e.description),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors text-sm",children:[(0,s.jsx)(h.A,{size:16}),"QR Code"]}),(0,s.jsx)("button",{onClick:()=>E(e.id),className:"px-3 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded-lg transition-colors",children:(0,s.jsx)(y.A,{size:16})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 ".concat(e.isActive?"text-green-400":"text-gray-400"),children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.isActive?"bg-green-400":"bg-gray-400")}),e.isActive?"Ativo":"Inativo"]}),e.qrCodeGeneratedAt&&(0,s.jsxs)("span",{className:"text-gray-500 flex items-center gap-1",children:[(0,s.jsx)(b.A,{size:12}),"QR atualizado ",new Date(e.qrCodeGeneratedAt).toLocaleTimeString("pt-BR")]})]})]})]},e.id))}):null]})}},8661:(e,a,t)=>{Promise.resolve().then(t.bind(t,6472))}},e=>{e.O(0,[595,694,141,441,964,358],()=>e(e.s=8661)),_N_E=e.O()}]);