(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{381:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},978:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("arrow-down-left",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]])},1469:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return c},getImageProps:function(){return l}});let s=a(8229),r=a(8883),n=a(3063),i=s._(a(1193));function l(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let c=n.Image},3169:(e,t,a)=>{Promise.resolve().then(a.bind(a,3267))},3267:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var s=a(5155),r=a(2115),n=a(5695),i=a(6874),l=a.n(i),c=a(6766),o=a(5424),d=a(3662),h=a(9946);let u=(0,h.A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);var m=a(978);let f=(0,h.A)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var p=a(9803),y=a(8164),x=a(381),g=a(7580),A=a(9397),k=a(7434),v=a(5525),j=a(4416);let b=(0,h.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),N=(0,h.A)("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]);function w(e){let{children:t}=e,a=(0,n.useRouter)(),i=(0,n.usePathname)(),[h,w]=(0,r.useState)(null),[M,_]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{let e=await o.y.getCurrentUser();e?w(e):a.push("/login")})()},[a]);let P=async()=>{await o.y.logout()},S=[{name:"Dashboard",href:"/dashboard",icon:u},{name:"Dep\xf3sitos",href:"/deposit",icon:m.A},{name:"Transa\xe7\xf5es",href:"/transactions",icon:f},{name:"API",href:"/api",icon:p.A},{name:"Links de Pagamento",href:"/payment-links",icon:y.A},{name:"Configura\xe7\xf5es",href:"/settings",icon:x.A}],z=[{name:"Usu\xe1rios",href:"/admin/users",icon:g.A},{name:"Solicita\xe7\xf5es API",href:"/admin/api-requests",icon:p.A},{name:"Todas Transa\xe7\xf5es",href:"/admin/transactions",icon:A.A},{name:"Auditoria",href:"/admin/audit",icon:k.A},{name:"Sistema",href:"/admin/system",icon:v.A}];return h?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[M&&(0,s.jsx)("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-75 lg:hidden",onClick:()=>_(!1)}),(0,s.jsxs)("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-gray-800 shadow-xl transform transition-transform duration-300 ease-in-out lg:translate-x-0 ".concat(M?"translate-x-0":"-translate-x-full"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(c.default,{src:"/atlas-logo.jpg",alt:"Atlas Logo",width:40,height:40,className:"rounded-lg"}),(0,s.jsx)("span",{className:"text-xl font-bold text-white",children:"Atlas Panel"})]}),(0,s.jsx)("button",{onClick:()=>_(!1),className:"lg:hidden",children:(0,s.jsx)(j.A,{className:"w-6 h-6 text-gray-400"})})]}),(0,s.jsxs)("nav",{className:"mt-8 px-4",children:[(0,s.jsx)("div",{className:"space-y-1",children:S.map(e=>(0,s.jsxs)(l(),{href:e.href,className:"flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ".concat(i===e.href?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:[(0,s.jsx)(e.icon,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-medium",children:e.name})]},e.name))}),(0,d.qc)(h.role)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mt-8 mb-2 px-3",children:(0,s.jsx)("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Administra\xe7\xe3o"})}),(0,s.jsx)("div",{className:"space-y-1",children:z.map(e=>(0,s.jsxs)(l(),{href:e.href,className:"flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ".concat(i===e.href?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:[(0,s.jsx)(e.icon,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-medium",children:e.name})]},e.name))})]})]}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-700",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-semibold",children:h.username[0].toUpperCase()})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-white",children:h.username}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:h.role})]})]}),(0,s.jsx)("button",{onClick:P,className:"text-gray-400 hover:text-red-500 transition-colors",children:(0,s.jsx)(b,{className:"w-5 h-5"})})]})})]}),(0,s.jsxs)("div",{className:"lg:ml-64",children:[(0,s.jsxs)("div",{className:"h-16 bg-gray-800 shadow-lg flex items-center px-6 border-b border-gray-700",children:[(0,s.jsx)("button",{onClick:()=>_(!0),className:"lg:hidden",children:(0,s.jsx)(N,{className:"w-6 h-6 text-gray-300"})}),(0,s.jsx)("h1",{className:"ml-4 lg:ml-0 text-xl font-semibold text-white",children:(0,d.qc)(h.role)?"Painel Administrativo":"Painel do Usu\xe1rio"})]}),(0,s.jsx)("main",{className:"p-6",children:t})]})]}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-12 h-12 border-4 border-blue-800 border-t-transparent rounded-full animate-spin"})})}},3662:(e,t,a)=>{"use strict";a.d(t,{d9:()=>n,gG:()=>s,qc:()=>r});var s=function(e){return e.USER="USER",e.ADMIN="ADMIN",e}({});let r=e=>"ADMIN"===e,n=e=>"ADMIN"===e?"Administrador":"Usu\xe1rio"},4416:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4750:(e,t,a)=>{"use strict";a.d(t,{A:()=>l,F:()=>i});var s=a(3464),r=a(7383);let n="https://api.atlasdao.info/api/v1",i=s.A.create({baseURL:n,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let t=r.A.get("access_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,async e=>{var t;let a=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!a._retry){a._retry=!0;try{let e=r.A.get("refresh_token");if(e){let{accessToken:t}=(await s.A.post("".concat(n,"/auth/refresh"),{refreshToken:e})).data;return r.A.set("access_token",t),r.A.set("refresh_token",e),a.headers.Authorization="Bearer ".concat(t),i(a)}}catch(e){r.A.remove("access_token"),r.A.remove("refresh_token"),window.location.href="/login"}}return Promise.reject(e)});let l=i},5424:(e,t,a)=>{"use strict";a.d(t,{y:()=>n});var s=a(4750),r=a(7383);let n={async login(e,t){let{accessToken:a,user:n}=(await s.A.post("/auth/login",{emailOrUsername:e,password:t})).data;return r.A.set("access_token",a),r.A.set("refresh_token",""),r.A.set("user",JSON.stringify(n)),{access_token:a,refresh_token:"",user:n}},async register(e,t,a){let{accessToken:n,user:i}=(await s.A.post("/auth/register",{username:e,email:t,password:a})).data;return r.A.set("access_token",n),r.A.set("refresh_token",""),r.A.set("user",JSON.stringify(i)),{access_token:n,refresh_token:"",user:i}},async logout(){try{await s.A.post("/auth/logout")}catch(e){console.error("Logout error:",e)}finally{r.A.remove("access_token"),r.A.remove("refresh_token"),r.A.remove("user"),window.location.href="/login"}},async getCurrentUser(){let e=r.A.get("user");if(e)try{return JSON.parse(e)}catch(e){}return null},isAuthenticated:()=>!!r.A.get("access_token"),isAdmin(){let e=r.A.get("user");if(e)try{var t;let a=JSON.parse(e);return(null==(t=a.roles)?void 0:t.includes("ADMIN"))||"ADMIN"===a.role}catch(e){}return!1}}},5525:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},6766:(e,t,a)=>{"use strict";a.d(t,{default:()=>r.a});var s=a(1469),r=a.n(s)},7434:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},7580:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},8164:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]])},9397:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},9803:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]])}},e=>{e.O(0,[595,874,63,441,964,358],()=>e(e.s=3169)),_N_E=e.O()}]);