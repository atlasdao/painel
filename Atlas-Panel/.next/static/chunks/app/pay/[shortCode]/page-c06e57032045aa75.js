(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[731],{1469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return c},getImageProps:function(){return o}});let a=r(8229),s=r(8883),l=r(3063),n=a._(r(1193));function o(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let c=l.Image},4500:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(5155),s=r(2115),l=r(5695),n=r(6766),o=r(4631),c=r(5339),i=r(7939),d=r(6862);function u(){let e,t=(0,l.useParams)().shortCode,[r,u]=(0,s.useState)(!0),[m,x]=(0,s.useState)(null),[h,g]=(0,s.useState)(null),[f,p]=(0,s.useState)(null),[y,j]=(0,s.useState)(null),[b,N]=(0,s.useState)(1680);(0,s.useEffect)(()=>{t&&w()},[t]),(0,s.useEffect)(()=>{if(f&&b>0){let e=setInterval(()=>{N(e=>e<=1?(v(),1680):e-1)},1e3);return()=>clearInterval(e)}},[f,b]);let w=async()=>{try{let e=await fetch("".concat("https://api.atlasdao.info/api/v1","/pay/").concat(t));if(!e.ok){404===e.status?x("Link de pagamento n\xe3o encontrado"):410===e.status?x("Este link de pagamento expirou"):x("Erro ao carregar dados do pagamento"),u(!1);return}let r=await e.json();g(r),await v()}catch(e){console.error("Error fetching payment data:",e),x("Erro ao conectar com o servidor"),u(!1)}},v=async()=>{try{let e=await fetch("".concat("https://api.atlasdao.info/api/v1","/pay/").concat(t,"/generate-qr"),{method:"POST"});if(!e.ok)throw Error("Failed to generate QR code");let r=await e.json();if(p(r.qrCode),r.qrCode)try{let e=await d.toDataURL(r.qrCode,{type:"image/png",margin:1,color:{dark:"#000000",light:"#FFFFFF"},width:300});j(e)}catch(e){console.error("Error generating QR code image:",e)}N(1680),u(!1)}catch(e){console.error("Error generating QR code:",e),x("Erro ao gerar QR Code PIX"),u(!1)}};return r?(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.A,{className:"animate-spin w-12 h-12 text-blue-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-white text-lg",children:"Carregando QR Code PIX..."})]})}):m?(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 max-w-md w-full mx-4 text-center",children:[(0,a.jsx)(c.A,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Erro"}),(0,a.jsx)("p",{className:"text-gray-300",children:m})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 max-w-md w-full",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)(n.default,{src:"/atlas-logo.jpg",alt:"Atlas Logo",width:60,height:60,className:"rounded-lg"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Pagamento PIX"}),(null==h?void 0:h.description)&&(0,a.jsx)("p",{className:"text-gray-400",children:h.description})]}),(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4 mb-6 text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Valor a pagar"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-white",children:(e=(null==h?void 0:h.amount)||0,new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e))})]}),y?(0,a.jsx)("div",{className:"bg-white rounded-lg p-4 mb-6",children:(0,a.jsx)("div",{className:"aspect-square relative",children:(0,a.jsx)(n.default,{src:y,alt:"QR Code PIX",fill:!0,className:"object-contain"})})}):f?(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-8 mb-6 text-center",children:[(0,a.jsx)(i.A,{className:"w-16 h-16 text-gray-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Gerando imagem do QR Code..."})]}):(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-8 mb-6 text-center",children:[(0,a.jsx)(i.A,{className:"w-16 h-16 text-gray-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-400",children:"QR Code n\xe3o dispon\xedvel"})]}),f&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"C\xf3digo PIX (copia e cola)"}),(0,a.jsx)("div",{className:"bg-gray-700 rounded-lg p-3",children:(0,a.jsx)("p",{className:"text-xs text-white font-mono break-all",children:f})}),(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(f),alert("C\xf3digo PIX copiado!")},className:"w-full mt-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Copiar c\xf3digo PIX"})]}),(0,a.jsxs)("div",{className:"bg-yellow-900/20 border border-yellow-500/30 rounded-lg p-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-yellow-400 text-sm",children:"QR Code expira em:"}),(0,a.jsx)("p",{className:"text-yellow-400 font-mono font-bold",children:(e=>{let t=Math.floor(e/60);return"".concat(t.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))})(b)})]}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"O QR Code ser\xe1 renovado automaticamente quando expirar"})]}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsx)("h3",{className:"font-semibold text-white",children:"Como pagar:"}),(0,a.jsxs)("ol",{className:"space-y-2 text-gray-300",children:[(0,a.jsx)("li",{children:"1. Abra o app do seu banco"}),(0,a.jsx)("li",{children:"2. Escolha pagar com PIX"}),(0,a.jsx)("li",{children:"3. Escaneie o QR Code ou copie o c\xf3digo"}),(0,a.jsx)("li",{children:"4. Confirme o pagamento"})]})]}),!1]})})}},5339:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},6654:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return s}});let a=r(2115);function s(e,t){let r=(0,a.useRef)(null),s=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=s.current;t&&(s.current=null,t())}else e&&(r.current=l(e,a)),t&&(s.current=l(t,a))},[e,t])}function l(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6766:(e,t,r)=>{"use strict";r.d(t,{default:()=>s.a});var a=r(1469),s=r.n(a)},7445:(e,t,r)=>{Promise.resolve().then(r.bind(r,4500))},9946:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(2115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:i="",children:d,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...n,width:s,height:s,stroke:r,strokeWidth:c?24*Number(o)/Number(s):o,className:l("lucide",i),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:c,...i}=r;return(0,a.createElement)(o,{ref:n,iconNode:t,className:l("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...i})});return r.displayName=s(e),r}}},e=>{e.O(0,[63,694,441,964,358],()=>e(e.s=7445)),_N_E=e.O()}]);